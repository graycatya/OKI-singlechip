;; Compile Options : /TM610409 /MS /near /Imain /Iclk /IINTERR~1 /Ikey /Ilcd /Ilcdshow /Imelody /Ircadc /Itemphum /Itimers /IMACROA~1 /Ieternity /ICLKbuzz /SD /Om /W 1 /Fa_output\_obj\ 
;; Version Number  : Ver.3.54.3
;; File Name       : rcadc.c

	type (M610409) 
	model small, near
	$$P3rcAdc_monitor_off$rcadc segment code 2h #0h
	$$P3rcAdc_monitor_on$rcadc segment code 2h #0h
	$$P4rcAdc_monitor_off$rcadc segment code 2h #0h
	$$P4rcAdc_monitor_on$rcadc segment code 2h #0h
	$$TABRCADC_SAMPLING_MODE$rcadc segment table 2h #0h
	$$TABRCADC_SAMP_CLK_MODE$rcadc segment table 2h #0h
	$$rcadc_RCAD_run$rcadc segment code 2h #0h
	$$rcadc_RCINT_run$rcadc segment code 2h #0h
	$$rcadc_Samp_Clk_init$rcadc segment code 2h #0h
	$$rcadc_getResult$rcadc segment code 2h #0h
	$$rcadc_intit$rcadc segment code 2h #0h
	$$rcadc_radi$rcadc segment code 2h #0h
CVERSION 3.54.3
CGLOBAL 01H 03H 0000H "P3rcAdc_monitor_on" 08H 02H 00H 00H 80H 00H 00H 00H 07H
CGLOBAL 01H 03H 0000H "P4rcAdc_monitor_off" 08H 02H 03H 00H 80H 00H 00H 00H 07H
CGLOBAL 01H 03H 0000H "rcadc_radi" 08H 02H 06H 00H 80H 00H 00H 00H 01H
CGLOBAL 01H 03H 0000H "rcadc_intit" 08H 02H 04H 00H 81H 06H 00H 00H 01H
CGLOBAL 01H 03H 0000H "rcadc_RCINT_run" 08H 02H 08H 00H 80H 00H 00H 00H 01H
CGLOBAL 01H 03H 0000H "P4rcAdc_monitor_on" 08H 02H 02H 00H 80H 00H 00H 00H 07H
CGLOBAL 01H 03H 0000H "P3rcAdc_monitor_off" 08H 02H 01H 00H 80H 00H 00H 00H 07H
CGLOBAL 01H 03H 0000H "rcadc_Samp_Clk_init" 08H 02H 05H 00H 80H 02H 00H 00H 01H
CGLOBAL 01H 03H 0000H "rcadc_RCAD_run" 08H 02H 07H 00H 80H 00H 00H 00H 01H
CGLOBAL 01H 03H 0000H "rcadc_getResult" 08H 02H 09H 00H 80H 02H 00H 00H 01H
CSTRUCTTAG 0000H 0000H 0000H 0008H 00000001H "_Notag"
CSTRUCTMEM 52H 00000001H 00000000H "b0" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000001H "b1" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000002H "b2" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000003H "b3" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000004H "b4" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000005H "b5" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000006H "b6" 02H 00H 00H
CSTRUCTMEM 52H 00000001H 00000007H "b7" 02H 00H 00H
CENUMTAG 0000H 0000H 0001H 0009H "RCmode_value"
CENUMMEM 00000000H "rcad_one"
CENUMMEM 00000001H "rcad_two"
CENUMMEM 00000002H "rcad_three"
CENUMMEM 00000003H "rcad_four"
CENUMMEM 00000004H "rcad_five"
CENUMMEM 00000005H "rcad_six"
CENUMMEM 00000006H "rcad_seven"
CENUMMEM 00000007H "rcad_eight"
CENUMMEM 00000008H "rcad_nine"
CTYPEDEF 0000H 0000H 42H "uint8" 02H 00H 00H
CTYPEDEF 0000H 0000H 42H "DWORD" 02H 00H 02H
CTYPEDEF 0000H 0000H 43H "INT8" 02H 00H 00H
CTYPEDEF 0000H 0000H 42H "uint32" 02H 00H 02H
CTYPEDEF 0000H 0000H 42H "uint16" 02H 00H 01H
CTYPEDEF 0000H 0000H 42H "byte" 02H 00H 00H
CTYPEDEF 0000H 0000H 43H "INT32" 02H 00H 02H
CTYPEDEF 0000H 0000H 43H "INT16" 02H 00H 01H
CTYPEDEF 0000H 0000H 42H "dword" 02H 00H 02H
CTYPEDEF 0000H 0000H 43H "int8" 02H 00H 00H
CTYPEDEF 0000H 0000H 42H "UINT" 02H 00H 01H
CTYPEDEF 0000H 0000H 42H "WORD" 02H 00H 01H
CTYPEDEF 0000H 0000H 43H "int16" 02H 00H 01H
CTYPEDEF 0000H 0000H 43H "int32" 02H 00H 02H
CTYPEDEF 0000H 0000H 42H "UINT8" 02H 00H 00H
CTYPEDEF 0000H 0000H 42H "uint" 02H 00H 01H
CTYPEDEF 0000H 0000H 42H "uchar" 02H 00H 00H
CTYPEDEF 0000H 0000H 42H "UINT16" 02H 00H 01H
CTYPEDEF 0000H 0000H 42H "UINT32" 02H 00H 02H
CTYPEDEF 0000H 0000H 42H "word" 02H 00H 01H
CTYPEDEF 0000H 0000H 42H "BOOL" 02H 00H 00H
CTYPEDEF 0000H 0000H 42H "BYTE" 02H 00H 00H
CTYPEDEF 0000H 0000H 43H "_BYTE_FIELD" 04H 00H 05H 00H 00H
CSGLOBAL 00H 0008H "RCADC_SAMP_CLK_MODE" 05H 01H 08H 00H 00H 00H
CSGLOBAL 00H 000AH "RCADC_SAMPLING_MODE" 05H 01H 0AH 00H 00H 00H
CFILE 0001H 00000822H "E:\\IDEU8\\Inc\\m610409.h"
CFILE 0002H 0000003FH "rcadc\\rcadc.h"
CFILE 0003H 00000025H "MACROA~1\\MacroAndConst.h"
CFILE 0000H 000000EBH "rcadc\\rcadc.c"

	rseg $$rcadc_intit$rcadc
CFUNCTION 4

_rcadc_intit	:
CBLOCK 4 1 48

;; {
CLINEA 0000H 0001H 0030H 0002H 0002H
	push	lr
	push	xr8
	mov	er8,	er0
	mov	er10,	er2
CBLOCK 4 2 48
CRET 0004H
CARGUMENT 46H 0002H 0028H "P3int" 02H 00H 01H
CARGUMENT 46H 0002H 0029H "P4int" 02H 00H 01H

;;   if(P3int >(unsigned int)RCADC_P3INT_ON || P4int > (unsigned int)RCADC_P4INT_ON) {
CLINEA 0000H 0001H 0032H 0004H 0054H
	cmp	r0,	#01h
	cmpc	r1,	#00h
	bgt	_$L2
	cmp	r2,	#01h
	cmpc	r3,	#00h
	ble	_$L1
_$L2 :
CBLOCK 4 3 50

;;   	 return (RCADC_DEPLOY_FAIL);
CLINEA 0000H 0001H 0033H 0006H 0020H
	mov	er0,	#-1
CBLOCKEND 4 3 52
CBLOCKEND 4 2 62

;;  }
CLINEA 0000H 0001H 003EH 0003H 0003H
_$L0 :
	pop	xr8
	pop	pc

;;	  }   
CLINEA 0000H 0000H 0034H 0004H 0007H
_$L1 :

;;    if(P3int == RCADC_P3INT_ON)   
CLINEA 0000H 0001H 0036H 0005H 0022H
	cmp	r8,	#01h
	cmpc	r9,	#00h
	bne	_$L8

;;     P3rcAdc_monitor_on();
CLINEA 0000H 0001H 0037H 0006H 001AH
	bl	_P3rcAdc_monitor_on

;;    else  P3rcAdc_monitor_off(); 
CLINEA 0000H 0001H 0038H 0005H 0021H
	bal	_$L10
_$L8 :
	bl	_P3rcAdc_monitor_off
_$L10 :

;;    if(P4int == RCADC_P4INT_ON)   
CLINEA 0000H 0001H 003AH 0005H 0022H
	cmp	r10,	#01h
	cmpc	r11,	#00h
	bne	_$L11

;;     P4rcAdc_monitor_on();
CLINEA 0000H 0001H 003BH 0006H 001AH
	bl	_P4rcAdc_monitor_on

;;    else P4rcAdc_monitor_off();    	
CLINEA 0000H 0001H 003CH 0005H 0024H
	bal	_$L13
_$L11 :
	bl	_P4rcAdc_monitor_off
_$L13 :

;;	return (RCADC_DEPLOY_OK);
CLINEA 0000H 0001H 003DH 0002H 001AH
	mov	er0,	#0 
	bal	_$L0
CBLOCKEND 4 1 62
CFUNCTIONEND 4


	rseg $$rcadc_Samp_Clk_init$rcadc
CFUNCTION 5

_rcadc_Samp_Clk_init	:
CBLOCK 5 1 74

;; {
CLINEA 0000H 0001H 004AH 0002H 0002H
	push	er8
	mov	er8,	er0
CBLOCK 5 2 74
CARGUMENT 46H 0002H 0028H "samp" 02H 00H 01H
CARGUMENT 46H 0002H 0025H "clk" 02H 00H 01H
CLOCAL 4AH 0001H 0000H 0002H "r0" 02H 00H 00H
CLOCAL 4AH 0001H 0000H 0002H "r1" 02H 00H 00H

;;   if(samp >= SAMP_MODE || clk >= SAMP_CLK_MODE) {
CLINEA 0000H 0001H 004DH 0004H 0032H
	cmp	r0,	#0ah
	cmpc	r1,	#00h
	bge	_$L16
	cmp	r2,	#08h
	cmpc	r3,	#00h
	blt	_$L15
_$L16 :
CBLOCK 5 3 77

;;   	 return (RCADC_DEPLOY_FAIL);
CLINEA 0000H 0001H 004EH 0006H 0020H
	mov	er0,	#-1
CBLOCKEND 5 3 79
CBLOCKEND 5 2 84

;; }
CLINEA 0000H 0001H 0054H 0002H 0002H
_$L14 :
	pop	er8
	rt

;;	  } 
CLINEA 0000H 0000H 004FH 0004H 0005H
_$L15 :

;;   RADMOD = ((r0 << 0) | (r1 << 5));
CLINEA 0000H 0001H 0052H 0004H 0024H
	l	r0,	NEAR _RCADC_SAMP_CLK_MODE[er2]
	sll	r0,	#05h
	l	r1,	NEAR _RCADC_SAMPLING_MODE[er8]
	or	r1,	r0
	st	r1,	0f308h

;;  return (RCADC_DEPLOY_OK);
CLINEA 0000H 0001H 0053H 0003H 001BH
	mov	er0,	#0 
	bal	_$L14
CBLOCKEND 5 1 84
CFUNCTIONEND 5


	rseg $$rcadc_radi$rcadc
CFUNCTION 6

_rcadc_radi	:
CBLOCK 6 1 95

;; {
CLINEA 0000H 0001H 005FH 0002H 0002H
	mov	er2,	er0
CBLOCK 6 2 95
CARGUMENT 46H 0002H 0025H "rad" 02H 00H 01H

;;   if(rad > (unsigned int)RCADC_B) {
CLINEA 0000H 0001H 0060H 0004H 0024H
	cmp	r0,	#01h
	cmpc	r1,	#00h
	ble	_$L23
CBLOCK 6 3 96

;; 	 return (RCADC_DEPLOY_FAIL); 
CLINEA 0000H 0001H 0061H 0004H 001FH
	mov	er0,	#-1
CBLOCKEND 6 3 98
CBLOCKEND 6 2 101

;;  }
CLINEA 0000H 0001H 0065H 0003H 0003H
	rt

;;    }
CLINEA 0000H 0000H 0062H 0005H 0005H
_$L23 :

;;   RADI = rad;
CLINEA 0000H 0001H 0063H 0004H 000EH
	mov	r0,	r2
	and	r0,	#01h
	beq	_$M3
	sb	0f308h.4
	bal	_$M4
_$M3 :
	rb	0f308h.4
_$M4 :

;;   return (RCADC_DEPLOY_OK);	 
CLINEA 0000H 0001H 0064H 0004H 001EH
	mov	er0,	#0 
	rt
CBLOCKEND 6 1 101
CFUNCTIONEND 6


	rseg $$rcadc_RCAD_run$rcadc
CFUNCTION 7

_rcadc_RCAD_run	:
CBLOCK 7 1 113

;; {
CLINEA 0000H 0001H 0071H 0002H 0002H
	mov	er2,	er0
CBLOCK 7 2 113
CARGUMENT 46H 0002H 0025H "run" 02H 00H 01H

;; 	if(run > (unsigned int)RCADC_RUN){
CLINEA 0000H 0001H 0072H 0003H 0024H
	cmp	r0,	#01h
	cmpc	r1,	#00h
	ble	_$L26
CBLOCK 7 3 114

;; 	  return (RCADC_DEPLOY_FAIL);
CLINEA 0000H 0001H 0073H 0005H 001FH
	mov	er0,	#-1
CBLOCKEND 7 3 116
CBLOCKEND 7 2 119

;; }
CLINEA 0000H 0001H 0077H 0002H 0002H
	rt

;;	 } 
CLINEA 0000H 0000H 0074H 0003H 0004H
_$L26 :

;;    RARUN = run;
CLINEA 0000H 0001H 0075H 0005H 0010H
	mov	r0,	r2
	and	r0,	#01h
	beq	_$M6
	sb	0f309h.0
	bal	_$M7
_$M6 :
	rb	0f309h.0
_$M7 :

;;    return (RCADC_DEPLOY_OK);
CLINEA 0000H 0001H 0076H 0005H 001DH
	mov	er0,	#0 
	rt
CBLOCKEND 7 1 119
CFUNCTIONEND 7


	rseg $$rcadc_RCINT_run$rcadc
CFUNCTION 8

_rcadc_RCINT_run	:
CBLOCK 8 1 130

;;  {
CLINEA 0000H 0001H 0082H 0003H 0003H
	mov	er2,	er0
CBLOCK 8 2 130
CARGUMENT 46H 0002H 0025H "INIT" 02H 00H 01H

;;  	if(INIT > (unsigned int)RCADCINT_START) {
CLINEA 0000H 0001H 0083H 0004H 002CH
	cmp	r0,	#01h
	cmpc	r1,	#00h
	ble	_$L29
CBLOCK 8 3 131

;;	  return (RCADC_DEPLOY_FAIL);	
CLINEA 0000H 0001H 0084H 0004H 001FH
	mov	er0,	#-1
CBLOCKEND 8 3 133
CBLOCKEND 8 2 136

;;   }
CLINEA 0000H 0001H 0088H 0004H 0004H
	rt

;;	  }
CLINEA 0000H 0000H 0085H 0004H 0004H
_$L29 :

;;     QRAD = INIT;
CLINEA 0000H 0001H 0086H 0006H 0011H
	mov	r0,	r2
	and	r0,	#01h
	beq	_$M9
	sb	0f01ch.5
	bal	_$M10
_$M9 :
	rb	0f01ch.5
_$M10 :

;;     return (RCADC_DEPLOY_OK);
CLINEA 0000H 0001H 0087H 0006H 001EH
	mov	er0,	#0 
	rt
CBLOCKEND 8 1 136
CFUNCTIONEND 8


	rseg $$rcadc_getResult$rcadc
CFUNCTION 9

_rcadc_getResult	:
CBLOCK 9 1 153

;; {
CLINEA 0000H 0001H 0099H 0002H 0002H
	push	er10
	mov	er10,	er2
CBLOCK 9 2 153
CARGUMENT 46H 0002H 0024H "cntNo" 02H 00H 01H
CARGUMENT 46H 0002H 0029H "result" 04H 03H 00H 00H 01H
CLOCAL 46H 0001H 0016H 0002H "r0" 02H 00H 00H
CLOCAL 46H 0001H 0014H 0002H "r1" 02H 00H 00H

;;	if(cntNo > (unsigned int)RCADC_B) {
CLINEA 0000H 0001H 009BH 0002H 0024H
	cmp	r0,	#01h
	cmpc	r1,	#00h
	ble	_$L32
CBLOCK 9 3 155

;;	 return (RCADC_DEPLOY_FAIL); //их╗п-1
CLINEA 0000H 0001H 009CH 0003H 0026H
	mov	er0,	#-1
CBLOCKEND 9 3 157
CBLOCKEND 9 2 175

;; }
CLINEA 0000H 0001H 00AFH 0002H 0002H
_$L31 :
	pop	er10
	rt

;;	 }
CLINEA 0000H 0000H 009DH 0003H 0003H
_$L32 :

;;	 if(cntNo == (unsigned int)RCADC_A) {
CLINEA 0000H 0001H 009FH 0003H 0026H
	mov	er0,	er0
	bne	_$L34
CBLOCK 9 4 159

;; 	   r0 = RADCB0;
CLINEA 0000H 0001H 00A0H 0006H 0011H
	l	r0,	0f304h
	mov	r2,	r0

;;	   r1 = RADCB1;	
CLINEA 0000H 0001H 00A1H 0005H 0011H
	l	r0,	0f305h
CBLOCKEND 9 4 162

;;	 else {
CLINEA 0000H 0001H 00A3H 0003H 0008H
	bal	_$L36
_$L34 :
CBLOCK 9 5 163

;; 	   r0 = RADCA0;
CLINEA 0000H 0001H 00A4H 0006H 0011H
	l	r0,	0f300h
	mov	r2,	r0

;;	   r1 = RADCA1;	
CLINEA 0000H 0001H 00A5H 0005H 0011H
	l	r0,	0f301h
CBLOCKEND 9 5 166

;; 	   } 
CLINEA 0000H 0000H 00A6H 0006H 0007H
_$L36 :

;;                              (((unsigned char)r1) << 8) );
CLINEA 0000H 0001H 00A9H 001FH 003BH
	mov	r1,	r0
	mov	r0,	#00h
	or	r0,	r2
	st	er0,	[er10]

;;     RADCB0=0;
CLINEA 0000H 0001H 00AAH 0006H 000EH
	mov	r0,	#00h
	st	r0,	0f304h

;;     RADCB1=0;
CLINEA 0000H 0001H 00ABH 0006H 000EH
	st	r0,	0f305h

;;     RADCA0=0;
CLINEA 0000H 0001H 00ACH 0006H 000EH
	st	r0,	0f300h

;;     RADCA1=0;
CLINEA 0000H 0001H 00ADH 0006H 000EH
	st	r0,	0f301h

;;     return (RCADC_DEPLOY_OK);
CLINEA 0000H 0001H 00AEH 0006H 001EH
	mov	er0,	#0 
	bal	_$L31
CBLOCKEND 9 1 175
CFUNCTIONEND 9


	rseg $$P3rcAdc_monitor_on$rcadc
CFUNCTION 0

_P3rcAdc_monitor_on	:
CBLOCK 0 1 186

;;{
CLINEA 0000H 0001H 00BAH 0001H 0001H
CBLOCK 0 2 186

;;	P3DIR = 0x1F;		 
CLINEA 0000H 0001H 00BBH 0002H 0011H
	mov	r0,	#01fh
	st	r0,	0f219h

;;	P3CON0 = 0x20;
CLINEA 0000H 0001H 00BCH 0002H 000FH
	mov	r0,	#020h
	st	r0,	0f21ah

;;	P3CON1 = 0x20;		 
CLINEA 0000H 0001H 00BDH 0002H 0012H
	st	r0,	0f21bh

;;	P3MOD0 = 0x3F;     
CLINEA 0000H 0001H 00BEH 0002H 0014H
	mov	r0,	#03fh
	st	r0,	0f21ch
CBLOCKEND 0 2 191

;;}
CLINEA 0000H 0001H 00BFH 0001H 0001H
	rt
CBLOCKEND 0 1 191
CFUNCTIONEND 0


	rseg $$P3rcAdc_monitor_off$rcadc
CFUNCTION 1

_P3rcAdc_monitor_off	:
CBLOCK 1 1 200

;;{
CLINEA 0000H 0001H 00C8H 0001H 0001H
CBLOCK 1 2 200

;;	P3DIR = 0;		
CLINEA 0000H 0001H 00C9H 0002H 000DH
	mov	r0,	#00h
	st	r0,	0f219h

;;	P3CON0 = 0;
CLINEA 0000H 0001H 00CAH 0002H 000CH
	st	r0,	0f21ah

;;	P3CON1 = 0;		
CLINEA 0000H 0001H 00CBH 0002H 000EH
	st	r0,	0f21bh

;;	P3MOD0 = 0;    
CLINEA 0000H 0001H 00CCH 0002H 0010H
	st	r0,	0f21ch
CBLOCKEND 1 2 205

;;}
CLINEA 0000H 0001H 00CDH 0001H 0001H
	rt
CBLOCKEND 1 1 205
CFUNCTIONEND 1


	rseg $$P4rcAdc_monitor_on$rcadc
CFUNCTION 2

_P4rcAdc_monitor_on	:
CBLOCK 2 1 214

;;{
CLINEA 0000H 0001H 00D6H 0001H 0001H
CBLOCK 2 2 214

;;	P4DIR = 0xF0;		
CLINEA 0000H 0001H 00D7H 0002H 0010H
	mov	r0,	#0f0h
	st	r0,	0f221h

;;	P4CON0 = 0;
CLINEA 0000H 0001H 00D8H 0002H 000CH
	mov	r0,	#00h
	st	r0,	0f222h

;;	P4CON1 = 0;		
CLINEA 0000H 0001H 00D9H 0002H 000EH
	st	r0,	0f223h

;;	P4MOD0 = 0xF0; 
CLINEA 0000H 0001H 00DAH 0002H 0010H
	mov	r0,	#0f0h
	st	r0,	0f224h

;;	P4MOD1 = 0;      
CLINEA 0000H 0001H 00DBH 0002H 0012H
	mov	r0,	#00h
	st	r0,	0f225h
CBLOCKEND 2 2 220

;;}
CLINEA 0000H 0001H 00DCH 0001H 0001H
	rt
CBLOCKEND 2 1 220
CFUNCTIONEND 2


	rseg $$P4rcAdc_monitor_off$rcadc
CFUNCTION 3

_P4rcAdc_monitor_off	:
CBLOCK 3 1 229

;;{
CLINEA 0000H 0001H 00E5H 0001H 0001H
CBLOCK 3 2 229

;;	P4DIR = 0;		
CLINEA 0000H 0001H 00E6H 0002H 000DH
	mov	r0,	#00h
	st	r0,	0f221h

;;	P4CON0 = 0;
CLINEA 0000H 0001H 00E7H 0002H 000CH
	st	r0,	0f222h

;;	P4CON1 = 0;		
CLINEA 0000H 0001H 00E8H 0002H 000EH
	st	r0,	0f223h

;;	P4MOD0 = 0; 
CLINEA 0000H 0001H 00E9H 0002H 000DH
	st	r0,	0f224h

;;	P4MOD1 = 0;     
CLINEA 0000H 0001H 00EAH 0002H 0011H
	st	r0,	0f225h
CBLOCKEND 3 2 235

;;}
CLINEA 0000H 0001H 00EBH 0001H 0001H
	rt
CBLOCKEND 3 1 235
CFUNCTIONEND 3

	public _P3rcAdc_monitor_on
	public _P4rcAdc_monitor_off
	public _rcadc_radi
	public _rcadc_intit
	public _rcadc_RCINT_run
	public _P4rcAdc_monitor_on
	public _P3rcAdc_monitor_off
	public _rcadc_Samp_Clk_init
	public _rcadc_RCAD_run
	public _rcadc_getResult
	extrn code near : _main

	rseg $$TABRCADC_SAMPLING_MODE$rcadc
_RCADC_SAMPLING_MODE :
	db	00h
	db	01h
	db	02h
	db	03h
	db	04h
	db	05h
	db	06h
	db	07h
	db	08h
	db	00h

	rseg $$TABRCADC_SAMP_CLK_MODE$rcadc
_RCADC_SAMP_CLK_MODE :
	db	00h
	db	01h
	db	02h
	db	03h
	db	04h
	db	05h
	db	06h
	db	00h

	end
